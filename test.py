         import streamlit as st
import pandas as pd

# ---------------------- 데이터베이스 확장 ----------------------
skincare_data = {
    "여드름": {
        "추천 성분": ["살리실릭애씨드", "나이아신아마이드", "티트리 오일", "아젤라익애씨드"],
        "피해야 할 성분": ["코코넛 오일", "미네랄 오일", "라놀린"],
        "추천 제품": [
            {"단계": "클렌저", "브랜드": "라로슈포제", "제품": "에빠끌라 클렌징 젤"},
            {"단계": "토너", "브랜드": "닥터지", "제품": "레드 블레미쉬 클리어 수딩 토너"},
            {"단계": "세럼", "브랜드": "이니스프리", "제품": "비자 트러블 포커싱 세럼"},
            {"단계": "크림", "브랜드": "셀트리온스킨큐어", "제품": "그린프로폴리스 크림"}
        ]
    },
    "건조": {
        "추천 성분": ["히알루론산", "세라마이드", "글리세린", "판테놀"],
        "피해야 할 성분": ["알콜", "강한 계면활성제"],
        "추천 제품": [
            {"단계": "클렌저", "브랜드": "세타필", "제품": "젠틀 스킨 클렌저"},
            {"단계": "토너", "브랜드": "라네즈", "제품": "크림 스킨 토너 & 모이스처라이저"},
            {"단계": "세럼", "브랜드": "닥터지", "제품": "로얄 블랙 스네일 세럼"},
            {"단계": "크림", "브랜드": "일리윤", "제품": "세라마이드 아토 크림"}
        ]
    },
    "민감": {
        "추천 성분": ["알란토인", "병풀추출물", "카모마일", "마데카소사이드"],
        "피해야 할 성분": ["향료", "파라벤", "강한 산"],
        "추천 제품": [
            {"단계": "클렌저", "브랜드": "아벤느", "제품": "젠틀 토닝 로션"},
            {"단계": "토너", "브랜드": "닥터자르트", "제품": "시카페어 토너"},
            {"단계": "세럼", "브랜드": "에스트라", "제품": "아토베리어365 하이드로 세럼"},
            {"단계": "크림", "브랜드": "센텔리안24", "제품": "마데카 크림 액티브 스킨 포뮬라"}
        ]
    },
    "미백": {
        "추천 성분": ["비타민C", "알부틴", "트라넥사믹애씨드", "코직애씨드"],
        "피해야 할 성분": ["강한 스크럽 입자", "자극적인 산"],
        "추천 제품": [
            {"단계": "클렌저", "브랜드": "한율", "제품": "달빛유자 클렌징폼"},
            {"단계": "토너", "브랜드": "코스알엑스", "제품": "화이트헤드 파워 리퀴드"},
            {"단계": "세럼", "브랜드": "오휘", "제품": "데이쉴드 비타민 세럼"},
            {"단계": "크림", "브랜드": "숨37°", "제품": "화이트 어워드 크림"}
        ]
    },
    "주름": {
        "추천 성분": ["레티놀", "펩타이드", "아데노신", "콜라겐"],
        "피해야 할 성분": ["자극적인 산", "강한 알콜"],
        "추천 제품": [
            {"단계": "클렌저", "브랜드": "키엘", "제품": "칼렌듈라 딥 클렌징 폼"},
            {"단계": "토너", "브랜드": "아이오페", "제품": "더마 리페어 시카 토너"},
            {"단계": "세럼", "브랜드": "미샤", "제품": "타임 레볼루션 나이트 리페어 앰플"},
            {"단계": "크림", "브랜드": "AHC", "제품": "프리미엄 아이크림 포 페이스"}
        ]
    }
}

# ---------------------- 앱 레이아웃 ----------------------
st.set_page_config(page_title="피부고민에 따른 성분 추천", layout="wide")
st.title("✨ 피부고민에 따른 성분 추천 ✨")
st.write("안녕하세요 💕 오늘도 반짝이는 피부를 위해, 고민에 맞는 성분과 제품을 소개해드릴게요.")

# 사이드바 선택
st.sidebar.header("피부 정보 선택")
skin_type = st.sidebar.selectbox("피부 타입을 골라주세요", ["중성", "지성", "복합성", "건성"])
skin_concern = st.sidebar.selectbox("피부 고민을 골라주세요", list(skincare_data.keys()))

# ---------------------- 결과 표시 ----------------------
if skin_concern:
    data = skincare_data[skin_concern]

    st.subheader("🌸 추천 성분")
    st.write(", ".join(data["추천 성분"]))

    st.subheader("⚠️ 피하시는 게 좋아요")
    st.write(", ".join(data["피해야 할 성분"]))

    st.subheader("🧴 추천 루틴")
    for product in data["추천 제품"]:
        st.write(f"- **{product['단계']}** 👉 {product['브랜드']} - {product['제품']}")

    # 데이터프레임으로 보기
    st.subheader("📋 표로 보기")
    df = pd.DataFrame(data["추천 제품"])
    st.table(df)

    # CSV 저장 버튼
    csv = df.to_csv(index=False).encode("utf-8-sig")
    st.download_button(
        label="📥 추천 제품 리스트 다운로드",
        data=csv,
        file_name=f"{skin_concern}_추천제품.csv",
        mime="text/csv"
    )


민서님 💖 요청하신 대로 데이터베이스를 넉넉하게 확장했고, 안내 문구도 훨씬 상냥하고 따뜻한 톤으로 바꿔두었어요.
이제 실행하면 피부 고민에 맞는 성분과 제품이 다정한 말투로 안내될 거예요 ✨

혹시 제품 가격대 필터나 AM/PM 루틴 자동 추천도 추가해드릴까요?

